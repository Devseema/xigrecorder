/* renderer/src/app.css
   Layout tuned:
   - smaller source tiles
   - preview + recordings stacked in right column
   - right column sticky and recordings scroll internally
   - left column scrolls independently
   - aim: no global page scroll
*/

/* ---------- Theme vars ---------- */
:root{
  --bg: #071018;
  --card: #0f1a22;
  --muted: #9aa7b0;
  --accent: #7c5cff;
  --accent-2: #ff8a00;
  --glass: rgba(255,255,255,0.02);
  --radius: 12px;
  --card-shadow: 0 12px 40px rgba(2,6,11,0.6);
  --right-width: 380px;
  --gutter: 20px;
  --header-h: 84px; /* approx header height */
}

/* ---------- Base ---------- */
* { box-sizing: border-box; }
html, body, #root { height: 100%; margin: 0; font-family: Inter, "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial; background: linear-gradient(180deg,#071018 0%, #07121a 100%); color: #dbe7ee; }
.app-root { height: 100vh; display: flex; flex-direction: column; padding: 12px; gap: 12px; }

/* ---------- Header ---------- */
.xr-header { display:flex; align-items:flex-start; justify-content:space-between; gap:12px; padding: 6px 4px; }
.brand { font-size: 34px; margin: 6px 0 0; color: #fff; letter-spacing: -1px; }
.subtitle { color: var(--muted); font-size: 13px; margin-top: 6px; }

/* ---------- Main area (fills remaining height) ---------- */
.xr-main { flex: 1 1 auto; display: flex; gap: var(--gutter); align-items: stretch; min-height: 0; }

/* Left column (flexible) */
.left-pane {
  flex: 1 1 1px;
  min-width: 320px;
  max-width: calc(100% - var(--right-width) - var(--gutter));
  display: flex;
  flex-direction: column;
  gap: 16px;
  overflow: auto;           /* left column scrolls internally */
  padding-right: 8px;
  padding-left: 4px;
  min-height: 0;            /* allow internal scroll */
}

/* Right column: fixed width and sticky inner column */
.right-pane {
  width: var(--right-width);
  min-width: 260px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  position: relative;
}

/* Sticky wrapper so preview + recordings stay visible while left scrolls */
.right-sticky {
  position: sticky;
  top: 12px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: calc(100vh - 24px);
  overflow: visible;
}

/* ---------- Card base ---------- */
.card {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding: 14px;
  border-radius: var(--radius);
  border: 1px solid rgba(255,255,255,0.03);
  box-shadow: var(--card-shadow);
  color: #e6f1f8;
}

/* ---------- Sources grid (smaller tiles) ---------- */
.card-title { font-weight:700; color:#e6f1f8; margin-bottom: 12px; }
.sources-grid { display:flex; flex-wrap:wrap; gap: 12px; align-items:flex-start; }

/* Reduce tile size to shrink left content */
.source-item, .source-tile {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 140px;               /* smaller width */
  height: 110px;              /* smaller height */
  padding: 8px;
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
  border: 1px solid rgba(255,255,255,0.02);
  cursor: pointer;
  transition: transform .12s, box-shadow .12s, border-color .12s;
  overflow: hidden;
}
.source-item img, .source-tile img { width:100%; height:64px; object-fit:cover; border-radius:6px; }
.thumb-placeholder, .source-tile .thumb-empty { width:100%; height:64px; border-radius:6px; background: linear-gradient(90deg,#0d1a21,#0c1418); }
.source-name, .source-label { margin-top: 8px; font-size: 12px; color: #dfe7ff; text-align:center; line-height:1.2; }
.source-item.selected, .source-tile.selected { outline: 3px solid rgba(124,92,255,0.18); border-color: rgba(124,92,255,0.28); box-shadow: 0 10px 30px rgba(124,92,255,0.06); }
.source-item:hover, .source-tile:hover { transform: translateY(-6px); box-shadow: 0 10px 30px rgba(2,6,11,0.6); }

/* ensure grid wraps nicely on narrow widths */
@media (max-width:1300px) {
  .source-item, .source-tile { width: 160px; height: 120px; }
}
@media (max-width:980px) {
  .source-item, .source-tile { width: 48%; min-width: 140px; height: auto; flex-direction: row; gap:10px; align-items:center; padding:10px; }
  .source-item img, .source-tile img { width: 120px; height:72px; border-radius:6px; }
  .source-name, .source-label { text-align:left; font-size:13px; }
}

/* ---------- Controls row ---------- */
.row { display:flex; align-items:center; gap:12px; margin:8px 0; flex-wrap:wrap; }
label { min-width: 64px; color: var(--muted); font-size: 14px; }
select { padding:9px 10px; border-radius:10px; background:#05080a; color:#fff; border:1px solid rgba(255,255,255,0.03); min-width:160px; }
.mini { padding:8px 10px; border-radius:8px; background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--muted); cursor:pointer; }

/* ---------- Buttons ---------- */
.actions { display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
button { cursor:pointer; padding:10px 14px; border-radius:10px; border:none; background:rgba(255,255,255,0.03); color:#e9eefc; }
button.primary { background: linear-gradient(90deg,var(--accent),var(--accent-2)); box-shadow: 0 8px 24px rgba(124,92,255,0.12); font-weight:600; padding:12px 22px; }
button.secondary { background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--muted); padding:10px 16px; }
button:disabled { opacity:0.45; cursor:not-allowed; }

/* ---------- Status & saved msg ---------- */
.status-area { margin-left:auto; display:flex; align-items:center; gap:10px; }
.status-badge { padding:8px 12px; border-radius:999px; font-size:13px; color:#fff; background:rgba(255,255,255,0.03); }
.save-msg { margin-left:12px; color:var(--muted); background:rgba(255,255,255,0.02); padding:10px 14px; border-radius:18px; display:inline-block; max-width:220px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* ---------- Preview ---------- */
.preview { display:flex; flex-direction:column; gap:10px; }
.preview .preview-wrap { background:#000; border-radius:10px; padding:12px; min-height: 260px; display:flex; align-items:center; justify-content:center; border:1px solid rgba(255,255,255,0.03); }
.preview-video { width:100%; height:320px; background:#000; border-radius:8px; object-fit:cover; }
.preview-foot { margin-top:10px; color:var(--muted); font-size:13px; }

/* ---------- Recordings below preview, scrollable ---------- */
.recordings-card { display:flex; flex-direction:column; gap:10px; }
.recordings-card .recordings-list { max-height: calc(100vh - 560px); /* keep within viewport; tuned for preview + header sizes */ overflow:auto; padding-right:6px; }
.recording-row { display:flex; align-items:center; justify-content:space-between; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.02); margin-bottom:10px; background:rgba(255,255,255,0.005); }
.recording-row .meta { display:flex; flex-direction:column; max-width: 220px; overflow:hidden; }
.recording-row .name { font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.recording-row .sub { font-size:12px; color:var(--muted); }
.recording-row .actions { display:flex; gap:8px; flex-shrink:0; }
.recordings-actions { display:flex; gap:8px; justify-content:flex-end; margin-top:10px; }

/* keep recordings-list height responsive on smaller screens */
@media (max-width:1100px) {
  .recordings-card .recordings-list { max-height: 220px; }
  .preview-video { height:260px; }
}

/* ---------- Toasts ---------- */
.toasts { position: fixed; right: 18px; top: 18px; display:flex; flex-direction:column; gap:10px; z-index:2000; }
.toast { background:rgba(12,20,24,0.9); color:#e9f3f7; padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); box-shadow:0 6px 20px rgba(2,6,11,0.6); }
.toast.ok { border-color: rgba(0,200,120,0.12); }
.toast.error { border-color: rgba(255,90,90,0.12); }
.toast.recording { background:linear-gradient(90deg,#ef4444,#f97316); color:white; }

/* ---------- Countdown overlay ---------- */
.countdown-overlay { position: fixed; left:0; top:0; right:0; bottom:0; background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.7)); display:flex; align-items:center; justify-content:center; z-index:1500; }
.countdown-big { font-size:120px; color:white; font-weight:800; }
.countdown-sub { color:var(--muted); margin-top:8px; }

/* ---------- Kbd style ---------- */
kbd { background: rgba(255,255,255,0.03); border-radius:6px; padding:2px 7px; font-weight:700; color:#fff; border:1px solid rgba(255,255,255,0.04); }

/* ---------- Responsive stack on small widths ---------- */
@media (max-width: 980px) {
  .xr-main { flex-direction: column; gap: 12px; }
  .left-pane { max-width:100%; }
  .right-pane { width:100%; min-width: unset; }
  .right-sticky { position: relative; top: auto; max-height: none; }
  .recordings-card .recordings-list { max-height: 200px; }
  .preview-video { height: 240px; }
  .save-msg { max-width: 100%; }
}

/* final safety: ensure no horizontal overflow */
body, .app-root, .xr-main, .left-pane, .right-pane { overflow-x: hidden; }
